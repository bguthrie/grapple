<html>
  <head>
    <link rel="stylesheet/less" type="text/css" href="stylesheets/grapple.less">
    <script type="text/coffeescript" src="javascripts/grapple2.coffee"></script>

    <script type="text/javascript" src="javascripts/coffee-script-1.3.1.min.js"></script>
    <script type="text/javascript" src="javascripts/less-1.3.0.min.js"></script>
    <script type="text/javascript" src="javascripts/jquery-1.8.1.min.js"></script>
    <script type="text/javascript" src="javascripts/underscore-1.4.2.min.js"></script>
    <script type="text/javascript" src="javascripts/knockout-2.2.0.js"></script>
    <script type="text/javascript" src="javascripts/jquery.flot.js"></script>
    <script type="text/javascript" src="javascripts/jquery.flot.time.js"></script>
    <script type="text/javascript" src="javascripts/jquery.flot.resize.js"></script>
    <script type="text/javascript" src="javascripts/jquery.transit.js"></script>
  </head>

  <body data-bind="event: { resize: resize, keyup: rotate }, style: { fontSize: rootFontSize + '%' }">
    <header>
      <h1 class="appname">grapple</h1>
      <nav>
        <a href="#fullscreen" class="settings" data-bind="click: fullscreen"><i class="icon-fullscreen icon-large"></i></a>
        <a href="#settings" class="settings" data-bind="click: showSettings, css: { active: settingsVisible }"><i class="icon-list-ul icon-large"></i></a>
      </nav>
    </header>

    <ul class="slidemarkers" data-bind="foreach: slides">
      <li>
        <a data-bind="attr: { href: '#' + $index() }, click: $parent.rotate, css: { active: active }, style: { width: markerSize, height: markerSize }"></a>
      </li>
    </ul>

    <div class="viewport" data-bind="style: { height: curtainHeight, width: width, top: headerHeight }">
      <div class="settings" data-bind="css: { visible: settingsVisible }">
        <form action="/settings" method="post" accept-charset="utf-8">
          <fieldset>
            <legend>global settings</legend>
           
            <label>Graphite host <input type="text" name="graphiteHost" data-bind="value: graphiteHost" id="graphiteHost"></input></label>
          </fieldset>

          <fieldset>
            <legend>current slide</legend>
            <ul class="slide-settings" data-bind="foreach: slides">
              <li data-bind="css: { active: active }">
                <label>Title <input type="text" name="title" data-bind="value: title"></input></label>
                <label>Subtitle <input type="text" name="subtitle" data-bind="value: subtitle"></input></label>
                <label>Update frequency <input type="text" name="refreshInterval" data-bind="value: refreshInterval"></input></label>

                <ul class="data-series-settings" data-bind="foreach: series">
                  <li>
                    <label>Label <input type="text" name="label" data-bind="value: label"></input></label>
                    <input type="color" name="color" data-bind="value: color"></input>
                  </li>
                </ul>
              </li>
            </ul>
          </fieldset>
        </form>
      </div>

      <!-- <h1 class="loading"></h1> -->
      <!-- <h3 class="more"></h3> -->

      <div class="slides" data-bind="foreach: slides">
        <div class="slide" data-bind="attr: { id: $index }, style: { height: height, width: width, left: width() * $index() }" style="width: 800px;">
          <div class="placeholder" data-bind="plot: points, style: { height: chartHeight }"></div>
          <div class="footer">
            <ul class="legend" data-bind="foreach: series">
              <li class="series">
                <span class="color" data-bind="style: { backgroundColor: color, width: size, height: size }"></span>
                <span class="label" data-bind="text: label"></span>
                <span class="value" data-bind="text: lastValue"></span>
              </li>
            </ul>
            <h1 class="title" data-bind="text: title"></h1>
            <h2 class="subtitle" data-bind="text: subtitle"></h2>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
